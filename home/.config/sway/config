# Read `man 5 sway` for a complete reference.

#
# Variables
#

set $wallpaper /home/duncan/Pictures/wallpapers/adventure_souls.jpg

# Your preferred terminal emulator
set $term wezterm

# Your preferred application launcher
# Note: pass the final command to swaymsg so that the resulting window can be opened
# on the original workspace that the command was run on.
# set $menu dmenu_path | dmenu | xargs swaymsg exec --
set $menu fuzzel || pkill fuzzel

#
# Idle configuration
#

exec swayidle -w before-sleep 'swaylock -f --image $wallpaper'

#
# Startup Apps and Layout
#

assign [title="Spotify"] workspace 1

# Use a little Firefox magic (profiles and --new-instance) to make sure Discord
# opens on Workspace 1, while the default Firefox profile (with all of the
# previous tabs and windows restored) opens on Workspace 2. Exec in workspace
# 2 last, because Firefox's "open previous windows" feature will race with
# workspace commands.
# TODO: persist the profiles in Nix config somehow
exec --no-startup-id swaymsg \
    'workspace 3, exec $term;\
    workspace 1, layout tabbed, exec spotify, exec firefox --new-instance -P Discord "https://discord.com/app";\
    workspace 2, layout tabbed, exec firefox'

#
# Configure DBus
#

# Don't execute on sway reloads, because it stops and starts pipewire
exec dbus-sway-environment

#
# Includes
#

include ./appearance
include ./bindings
include ./hardware_specific

